/********
   Arduino Pong By Pete Lamonica modified by duboisvb
   updated by James Bruce (http://www.makeuseof.com/tag/author/jbruce
   A simple implementation of Pong on the Arduino using a TV for output.
   To compile, from the library manager (Sketch/Include library/Manage libraries), install: tvout.
   Move the directory, TVoutfonts, to the directory: Documents/Arduino/libraries.
*/
#include <TVout.h>
#include <fontALL.h>

#define WHEEL_ONE_PIN 0 //analog
#define WHEEL_TWO_PIN 1 //analog
#define BUTTON_ONE_PIN 2 //digital to start game

#define IN_MENU 1 //in menu state
int state = IN_MENU;
boolean doDrawMenu = true;

TVout TV;
int counter = 0;

boolean button1Status = false;
int wheelOnePosition = 0;
int wheelTwoPosition = 0;

void drawMenu() {
  Serial.println("+ drawMenu");
  TV.clear_screen();
  TV.select_font(font8x8);
  TV.print(6, 5, "Arduino Pong V1");
  TV.select_font(font4x6);
  TV.print(22, 35, "Press Button");
  TV.print(30, 45, "To Start");
}

void processInputs() {
  wheelOnePosition = analogRead(WHEEL_ONE_PIN);
  wheelTwoPosition = analogRead(WHEEL_TWO_PIN);
  button1Status = (digitalRead(BUTTON_ONE_PIN));
    Serial.print(wheelOnePosition);
  Serial.print(" ");
  Serial.print(wheelTwoPosition);
  Serial.print(" ");
  Serial.println(button1Status);
  delay(500);
}

void setup()  {
  Serial.begin(9600);
  Serial.println("+++ Setup start.");
  TV.begin(_NTSC);       //for devices with only 1k sram(m168) use TV.begin(_NTSC,128,56)
  state = IN_MENU;
  Serial.println("+ Setup complete.");
}

void loop() {
  counter ++;
  Serial.print("+ loop counter = ");
  Serial.println(counter);
  processInputs();
  if (state == IN_MENU && doDrawMenu) {
    drawMenu();
    doDrawMenu = false;
  }
  // delay(50);
}

// eof
